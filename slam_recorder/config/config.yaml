# Foxglove WebSocket Bridge 配置
Foxglove:
  websocket:
    enable: true                    # 是否启用 WebSocket 服务器
    host: 127.0.0.1                 # 监听地址 (0.0.0.0 = 所有网卡)
    port: 8766                      # WebSocket 端口
    poll_interval_ms: 3             # 轮询间隔（毫秒）
    server_name: slam_recorder      # 服务器名称

  # MCAP 录制配置
  recorder:
    enable: false                    # 是否启用数据录制
    output_dir: /home/ubuntu/slam_adapter/slam_recorder/output  # 输出目录
    filename_prefix: recording      # 文件名前缀
    auto_start: true                # 启动时自动开始录制
    compression: zstd               # 压缩格式: none, lz4, zstd
    chunk_size: 1048576             # MCAP chunk 大小 (1MB)

  # 处理的 topics
  topics:
    - name: /lidar_points
      schema: foxglove.PointCloud
      enabled: true
    - name: /camera/image_raw
      schema: foxglove.CompressedImage
      enabled: true
    - name: /lidar_imu
      schema: foxglove.Imu
      enabled: true
    - name: /path
      schema: foxglove.PosesInFrame
      enabled: true
    - name: /odom
      schema: foxglove.PoseInFrame
      enabled: true
    - name: /tf
      schema: foxglove.FrameTransforms
      enabled: true

BagTool:
  input:
    path: /home/ubuntu/data/odom_test.mcap
    type: ros1_mcap
    loop: false

  playback:
    enable: true
    rate: 1.0
    synchronize_time: true
    default_queue_depth: 10

  record:
    enable: false
    output_dir: /home/ubuntu/slam_adapter/slam_recorder/output
    filename_prefix: recording
    compression: zstd
    chunk_size: 1048576
    overwrite_existing: true

  topics:
    default_playback_enabled: true
    default_record_enabled: true
    entries:
      - name: /livox/lidar
        schema: livox_ros_driver2/CustomMsg
        playback_enabled: true
        record_enabled: true
        publish_service: /lidar_points
        queue_depth: 10
      - name: /camera/image_raw/compressed
        schema: sensor_msgs/CompressedImage
        playback_enabled: true
        record_enabled: true
        publish_service: /camera/image_raw
        queue_depth: 10
      - name: /livox/imu
        schema: sensor_msgs/Imu
        playback_enabled: true
        record_enabled: true
        publish_service: /lidar_imu
        queue_depth: 100
      - name: /path
        schema: nav_msgs/Path
        playback_enabled: true
        record_enabled: true
        publish_service: /path
        queue_depth: 10
      - name: /Odometry
        schema: nav_msgs/Odometry
        playback_enabled: true
        record_enabled: true
        publish_service: /odom
        queue_depth: 10
      - name: /tf
        schema: tf2_msgs/TFMessage
        playback_enabled: true
        record_enabled: true
        publish_service: /tf
        queue_depth: 10
